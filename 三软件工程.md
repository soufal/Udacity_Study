## 三、软件工程：  

[TOC]

### （一）软件工程实践第 1 部分

#### 1. 课程大纲：

将了解以下软件工程实践及其在数据科学中的应用：

- 编写整洁和模块化的代码
- 编写高效的代码
- 代码重构
- 添加有意义的文档注释
- 使用版本控制

#### 2. 整洁和模块化的代码：

- **生产代码：**在生产服务器上运行的代码，用于处理在生产服务器上运行的软件，以及用户和目标受众的实时数据。注意，生产代码并不等同于**生产级质量代码**，后者是指满足生产的可靠性、效率等期望的代码。理想情况下，生产中的所有代码都应符合这些期望，但通常都不是这样。
- **整洁：**可读、简单、精炼。生产级质量代码的特征之一，对软件开发中的协作和可维护性至关重要。
- **模块化：**逻辑性地分解为函数和模块。这也是生产级质量代码的一个重要特征，它使代码更有条理，更高效，可复用性更高。*将细节抽象为函数和模块，提高代码的可读性。*
- **模块：**也就是文件。将代码封装为文件，这些文件可导入其他文件中进行代码复用。



##### (1) 编写简洁的代码：

> **提示1：使用有意义的名称**
>
> - **具有描述性并暗示类型** - 比如：对于布尔值来说，使用 `is_` 或 `has_` 前缀来表明这是一个条件。你也可以使用词性来暗示类型，比如对函数名用动词，对变量名用名词。
> - **保持一致但明确区分** - 比如 `age_list` 和 `age` 比起 `ages` 和 `age` 来要更容易区分。
> - **避免缩写，尤其是单个字母** - （例外：计数器和常用数学变量）根据你的代码受众而决定选择何时适用于这些例外情况，如果你与其他数据科学家合作，某些特定的变量名可能是常识，如果你和全栈工程师一起工作，在这些情况下可能还需要提供更具描述性的名称。
> - **长名称 != 描述性名称** - 你应该具有描述性，但是仅限于相关信息。比如，好的函数名描述其功能，但是不需要包含有关实现或者高度特定用途的详细信息。



> **提示1：恰当使用空白**
>
> - 使用一致的缩进来组织代码 - 标准是每个缩进使用 4 个空格。你可以在文本编辑器中将其设置为默认值。
> - 使用空行分隔各个代码部分，使代码更易组织和阅读。
> - 尝试将行限制为大约 79 个字符，这是 PEP 8 样式指南中给出的规范。在许多优秀的文本编辑器中，有设置可以显示一条浅色的竖线，指示 79 个字符限制的位置。



##### (2) 编写模块化代码：

> **提示1：DRY（Don't Repeat Yourself 不要重复自己）**
>
> 不要重复自己！模块化可以帮助你复用代码，使用函数或循环，将重复的代码通用化并整合。

> **提示2：将逻辑抽象出来提高可读性**
>
> 将代码抽象到函数中不仅使其重复性降低，而且描述性的函数名还提高了可读性。将逻辑抽象为函数时，代码虽然可以变得更具可读性，但是可能会出现过度设计的情况，最终的模块过多，因此需要判断。

> **提示3：函数、类、模块等实体数量最小化**
>
> 选择函数调用还是使用内联逻辑需要进行权衡，如果将代码拆分为很多不必要的函数和模块，那么当你想要查看某个很小功能的实现详情时，可能都需要到处跳着查看，增加了工作量，创建更多的模块不等于更有效的模块化。

> **提示4：函数应该只做一件事**
>
> 每个函数都应该专注于做一件事。如果函数执行多项操作，则会使通用和复用变得更加困难。通常，如果函数名中有 "and"，请考虑重构。

> **提示5：任意变量名在某些函数中可能更有效**
>
> 一般函数中的任意变量名实际上可以使代码更具可读性。

> **提示6：尽量在每个函数中使用少于 3 个参数**
>
> 尽可能尝试使用不超过三个参数。这不是一个硬性规则，有时确实多个参数更加恰当。但在大多数情况下，使用较少的参数会更有效。请记住，我们正在模块化以简化代码并使其更有效地使用。如果你的函数有很多参数，可能需要重新考虑如何拆分它。





#### 3. 重构代码：

- **重构（Refactoring）：**重新构造代码，改进其内部结构，不改变其外部功能。在完成功能完整的代码后，将代码进行整理和模块化。
- 在尝试完善代码功能时，并不容易遵循最好的代码规范，因此分配时间来生成高质量代码至关重要。尽管最开始需要时间和精力，但从长远来看，这可以加快开发时间，获得回报。
- 不断寻求改进代码时，你也将成为一名更强大的编程人员。重构的经历越多，第一次构造和编写优秀的代码就越容易。

##### (1) 高效代码：

优化代码以提高效率可能意味着：

- 更快的执行时间
  - **尽可能使用向量运算而不是循环（使用NUmpy和pandas的函数替代循环。**
    - 例如使用`numpy.intersect1d`得到两个数组的交集。
  - 仔细检查Python中是否存在可用于更高效完成任务的数据结构或方法。
    - [为什么集合比列表更快](https://stackoverflow.com/questions/8929284/what-makes-sets-faster-than-lists/8929445#8929445)
  - 
- 占用内存/存储空间更少

